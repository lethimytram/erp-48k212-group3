<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Default Approval Configurations -->
    <record id="approval_config_standard" model="training.approval.config">
        <field name="name">Ph√™ duy·ªát ti√™u chu·∫©n</field>
        <field name="sequence">10</field>
        <field name="min_duration">0</field>
        <field name="max_duration">40</field>
        <field name="min_cost">0</field>
        <field name="max_cost">5000000</field>
    </record>

    <record id="approval_step_manager" model="training.approval.step">
        <field name="name">Qu·∫£n l√Ω tr·ª±c ti·∫øp</field>
        <field name="sequence">10</field>
        <field name="config_id" ref="approval_config_standard"/>
        <field name="approver_type">manager</field>
    </record>

    <record id="approval_step_hr" model="training.approval.step">
        <field name="name">HR Manager</field>
        <field name="sequence">20</field>
        <field name="config_id" ref="approval_config_standard"/>
        <field name="approver_type">hr_manager</field>
    </record>

    <!-- High Value Training Approval Config -->
    <record id="approval_config_high_value" model="training.approval.config">
        <field name="name">Ph√™ duy·ªát kh√≥a h·ªçc cao c·∫•p</field>
        <field name="sequence">5</field>
        <field name="min_cost">5000000</field>
    </record>

    <record id="approval_step_hv_manager" model="training.approval.step">
        <field name="name">Qu·∫£n l√Ω tr·ª±c ti·∫øp</field>
        <field name="sequence">10</field>
        <field name="config_id" ref="approval_config_high_value"/>
        <field name="approver_type">manager</field>
    </record>

    <record id="approval_step_hv_hr" model="training.approval.step">
        <field name="name">HR Manager</field>
        <field name="sequence">20</field>
        <field name="config_id" ref="approval_config_high_value"/>
        <field name="approver_type">hr_manager</field>
    </record>

    <record id="approval_step_hv_director" model="training.approval.step">
        <field name="name">Gi√°m ƒë·ªëc</field>
        <field name="sequence">30</field>
        <field name="config_id" ref="approval_config_high_value"/>
        <field name="approver_type">director</field>
    </record>

    <!-- Email Template: Approval Request -->
    <record id="email_template_approval_request" model="mail.template">
        <field name="name">Training: Approval Request</field>
        <field name="model_id" ref="model_training_approval_line"/>
        <field name="subject">Y√™u c·∫ßu ph√™ duy·ªát ƒë√†o t·∫°o: ${object.approval_id.course_id.name}</field>
        <field name="email_to">${object.approver_id.email}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f5f5f5;">
                <div style="background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h2 style="color: #875A7B; margin: 0;">üîî Y√äU C·∫¶U PH√ä DUY·ªÜT ƒê√ÄO T·∫†O</h2>
                    </div>

                    <p>Xin ch√†o <strong>${object.approver_id.name}</strong>,
                    </p>

                    <p>B·∫°n c√≥ m·ªôt y√™u c·∫ßu ph√™ duy·ªát ƒë√†o t·∫°o m·ªõi c·∫ßn x·ª≠ l√Ω:</p>

                    <div style="background-color: #f8f9fa; padding: 20px; border-radius: 5px; margin: 20px 0;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 8px 0; width: 40%;">
                                    <strong>Nh√¢n vi√™n:</strong>
                                </td>
                                <td style="padding: 8px 0;">${object.approval_id.employee_id.name}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px 0;">
                                    <strong>Kh√≥a h·ªçc:</strong>
                                </td>
                                <td style="padding: 8px 0;">${object.approval_id.course_id.name}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px 0;">
                                    <strong>B∆∞·ªõc ph√™ duy·ªát:</strong>
                                </td>
                                <td style="padding: 8px 0;">${object.step_id.name}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px 0;">
                                    <strong>Ng√†y y√™u c·∫ßu:</strong>
                                </td>
                                <td style="padding: 8px 0;">${format_datetime(object.approval_id.request_date, dt_format='dd/MM/yyyy HH:mm')}</td>
                            </tr>
                        </table>
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <a href="${object.get_base_url()}/web#id=${object.approval_id.id}&amp;model=training.approval&amp;view_type=form" style="display: inline-block; padding: 12px 30px; background-color: #875A7B; color: white; text-decoration: none; border-radius: 5px; font-weight: bold;">
                            Xem chi ti·∫øt v√† ph√™ duy·ªát
                        </a>
                    </div>

                    <p style="color: #666; font-size: 12px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                        Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng qu·∫£n l√Ω ƒë√†o t·∫°o. Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y.
                    </p>
                </div>
            </div>
        </field>
    </record>

    <!-- Email Template: Approval Approved -->
    <record id="email_template_approval_approved" model="mail.template">
        <field name="name">Training: Approval Approved</field>
        <field name="model_id" ref="model_training_approval"/>
        <field name="subject">‚úÖ Y√™u c·∫ßu ƒë√†o t·∫°o ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát: ${object.course_id.name}</field>
        <field name="email_to">${object.employee_id.work_email}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f5f5f5;">
                <div style="background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h2 style="color: #28a745; margin: 0;">‚úÖ PH√ä DUY·ªÜT TH√ÄNH C√îNG</h2>
                    </div>

                    <p>Xin ch√†o <strong>${object.employee_id.name}</strong>,
                    </p>

                    <p>Ch√∫c m·ª´ng! Y√™u c·∫ßu ƒë√†o t·∫°o c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát.</p>

                    <div style="background-color: #d4edda; padding: 20px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #28a745;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 8px 0; width: 40%;">
                                    <strong>Kh√≥a h·ªçc:</strong>
                                </td>
                                <td style="padding: 8px 0;">${object.course_id.name}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px 0;">
                                    <strong>Ng√†y ph√™ duy·ªát:</strong>
                                </td>
                                <td style="padding: 8px 0;">${format_datetime(object.approval_date, dt_format='dd/MM/yyyy HH:mm')}</td>
                            </tr>
                        </table>
                    </div>

                    <p>Vui l√≤ng theo d√µi l·ªãch h·ªçc v√† chu·∫©n b·ªã tham gia kh√≥a ƒë√†o t·∫°o.</p>

                    <div style="text-align: center; margin: 30px 0;">
                        <a href="${object.get_base_url()}/web#id=${object.enrollment_id.id}&amp;model=training.enrollment&amp;view_type=form" style="display: inline-block; padding: 12px 30px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; font-weight: bold;">
                            Xem th√¥ng tin ƒëƒÉng k√Ω
                        </a>
                    </div>

                    <p style="color: #666; font-size: 12px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                        Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng qu·∫£n l√Ω ƒë√†o t·∫°o. Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y.
                    </p>
                </div>
            </div>
        </field>
    </record>

    <!-- Email Template: Approval Rejected -->
    <record id="email_template_approval_rejected" model="mail.template">
        <field name="name">Training: Approval Rejected</field>
        <field name="model_id" ref="model_training_approval"/>
        <field name="subject">‚ùå Y√™u c·∫ßu ƒë√†o t·∫°o b·ªã t·ª´ ch·ªëi: ${object.course_id.name}</field>
        <field name="email_to">${object.employee_id.work_email}</field>
        <field name="body_html" type="html">
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background-color: #f5f5f5;">
                <div style="background-color: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h2 style="color: #dc3545; margin: 0;">‚ùå Y√äU C·∫¶U B·ªä T·ª™ CH·ªêI</h2>
                    </div>

                    <p>Xin ch√†o <strong>${object.employee_id.name}</strong>,
                    </p>

                    <p>R·∫•t ti·∫øc, y√™u c·∫ßu ƒë√†o t·∫°o c·ªßa b·∫°n ƒë√£ b·ªã t·ª´ ch·ªëi.</p>

                    <div style="background-color: #f8d7da; padding: 20px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #dc3545;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <tr>
                                <td style="padding: 8px 0; width: 40%;">
                                    <strong>Kh√≥a h·ªçc:</strong>
                                </td>
                                <td style="padding: 8px 0;">${object.course_id.name}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px 0;">
                                    <strong>Ng√†y t·ª´ ch·ªëi:</strong>
                                </td>
                                <td style="padding: 8px 0;">${format_datetime(object.rejection_date, dt_format='dd/MM/yyyy HH:mm')}</td>
                            </tr>
                            <tr>
                                <td style="padding: 8px 0; vertical-align: top;">
                                    <strong>L√Ω do:</strong>
                                </td>
                                <td style="padding: 8px 0;">${object.rejection_reason or 'Kh√¥ng c√≥ l√Ω do c·ª• th·ªÉ'}</td>
                            </tr>
                        </table>
                    </div>

                    <p>Vui l√≤ng li√™n h·ªá v·ªõi ng∆∞·ªùi ph√™ duy·ªát ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt ho·∫∑c th·ª≠ ƒëƒÉng k√Ω kh√≥a h·ªçc kh√°c ph√π h·ª£p h∆°n.</p>

                    <div style="text-align: center; margin: 30px 0;">
                        <a href="${object.get_base_url()}/web#id=${object.id}&amp;model=training.approval&amp;view_type=form" style="display: inline-block; padding: 12px 30px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 5px; font-weight: bold;">
                            Xem chi ti·∫øt
                        </a>
                    </div>

                    <p style="color: #666; font-size: 12px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
                        Email n√†y ƒë∆∞·ª£c g·ª≠i t·ª± ƒë·ªông t·ª´ h·ªá th·ªëng qu·∫£n l√Ω ƒë√†o t·∫°o. Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y.
                    </p>
                </div>
            </div>
        </field>
    </record>

</odoo>
