<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <!-- Record Rules: Nhân viên - chỉ xem được bản ghi của mình -->
    <record id="rule_enrollment_employee" model="ir.rule">
        <field name="name">Employee: Own Enrollments</field>
        <field name="model_id" ref="model_training_enrollment"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_training_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="rule_exam_employee" model="ir.rule">
        <field name="name">Employee: Own Exams</field>
        <field name="model_id" ref="model_training_exam"/>
        <field name="domain_force">[('enrollment_id.employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_training_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="rule_certificate_employee" model="ir.rule">
        <field name="name">Employee: Own Certificates</field>
        <field name="model_id" ref="model_training_certificate"/>
        <field name="domain_force">[('employee_id.user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_training_employee'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Record Rules: Quản lý cửa hàng - xem nhân viên trong cửa hàng -->
    <record id="rule_enrollment_manager" model="ir.rule">
        <field name="name">Manager: Store Enrollments</field>
        <field name="model_id" ref="model_training_enrollment"/>
        <field name="domain_force">[('employee_id.parent_id', '=', user.employee_id.id)]</field>
        <field name="groups" eval="[(4, ref('group_training_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="rule_practice_manager" model="ir.rule">
        <field name="name">Manager: Store Practice</field>
        <field name="model_id" ref="model_training_practice"/>
        <field name="domain_force">[('enrollment_id.employee_id.department_id.manager_id', '=', user.employee_id.id)]</field>
        <field name="groups" eval="[(4, ref('group_training_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <!-- Admin: All Practice Records -->
    <record id="rule_practice_admin" model="ir.rule">
        <field name="name">Admin: All Practice</field>
        <field name="model_id" ref="model_training_practice"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_training_admin'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Record Rules: Admin - xem tất cả -->
    <record id="rule_all_admin" model="ir.rule">
        <field name="name">Admin: All Records</field>
        <field name="model_id" ref="model_training_enrollment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_training_admin'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

</odoo>
